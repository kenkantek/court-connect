$(document).ready(function(){var e=$("#datatables"),a=10,t=!0,o=!0,r="GET",s=$("div[data-section]").data("section"),n=($("div[data-base-url]").data("base-url"),$("div[data-route-create]").data("route-create")),d=$("div[data-route-delete-many]").data("route-delete-many");window.oTable=e.DataTable({language:{aria:{sortAscending:": orderby asc",sortDescending:": orderby desc"},emptyTable:"There is no data to display",info:"Show from _START_ - _END_ in _TOTAL_ records",infoEmpty:"No record found",infoFiltered:"(filtered from _MAX_ records)",lengthMenu:"_MENU_",search:"",zeroRecords:"No record found",processing:"Loading data from server"},bStateSave:!0,aoColumnDefs:[{bSortable:!1,aTargets:["no-sort"]},{bSearchable:!1,aTargets:["no-search"]}],lengthMenu:[[10,30,50,-1],[10,30,50,"All"]],pageLength:a,processing:t,serverSide:o,bServerSide:o,bDeferRender:!0,bProcessing:!0,ajax:{url:laroute.route(s),type:r,data:function(e){e.groupFilter=window.groupFilter}},fnInitComplete:function(){$(".checkboxes").uniform()},fnDrawCallback:function(e){$(".checkboxes").uniform()},dom:'<"datatable-header"Tfl>t<"datatable-footer"ip>'}),window.oTable.on("draw.dt",function(){$(".tip").tooltip({placement:"top"}),$.fn.editable&&$(".editable").editable()});var i=$("#datatables_wrapper");$("#datatables_column_toggler");e.find(".group-checkable").change(function(){var e=$(this).attr("data-set"),a=$(this).prop("checked");$(e).each(function(){a?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$.uniform.update(e)}),i.find(".dataTables_length select").select2({minimumResultsForSearch:1/0,width:85}),$(".dataTables_filter input[type=search]").attr("placeholder","Type to filter..."),e.on("click"," tbody td .row-details",function(){var e=$(this).parents("tr")[0];window.oTable.fnIsOpen(e)?($(this).addClass("row-details-close").removeClass("row-details-open"),window.oTable.fnClose(e)):($(this).addClass("row-details-open").removeClass("row-details-close"),window.oTable.fnOpen(e,null,"details"))}),$("div.dataTables_filter").append('<a class="btn btn-primary pull-right" href="'+laroute.route(n)+'"><i class="fa fa-plus-circle"></i> Add New</a><div class="actions"><div class="btn-group"><a class="btn btn-primary" href="javascript:;" data-toggle="dropdown"><span>Action <span class="caret"></span></span></a><ul class="dropdown-menu"><li><a href="javascript:;" class="task-item" data-action="delete"><i class="fa fa-trash-o"></i> Delete </a></li></ul></div></div>'),$(document).on("click",".deleteDialog",function(e){e.preventDefault(),$("#delete-crud-entry").data("section",$(this).data("section")),$("#delete-crud-modal").modal("show")}),$("#delete-crud-entry").on("click",function(e){e.preventDefault(),$("#delete-crud-modal").modal("hide");var a=$(this).data("section");$.ajax({url:a,type:"GET",success:function(e,t){e.error?showNotice("error",e.message,"Error!"):(window.oTable.row($('a[data-section="'+a+'"]').closest("tr")).remove().draw(),showNotice("success",e.message,"Success!"))},error:function(e){showNotice("error",e.responseJSON.message,"Error!")}})}),$(document).on("click",".task-item",function(e){e.preventDefault();var a=$(this).data("action");"delete"==a&&($("#delete-many-modal").modal("show"),$("#delete-many-entry").data("action",a))}),$("#delete-many-entry").on("click",function(e){e.preventDefault(),$("#delete-many-modal").modal("hide");var a=$(this).data("action"),t=[];$(".checkboxes:checked").each(function(e){t[e]=$(this).val()}),$.ajax({url:laroute.route(d),type:"POST",data:{action:a,ids:t},success:function(e,a){e.error?showNotice("error",e.message,"Error!"):($.each(t,function(e,a){window.oTable.row($('.checkboxes[value="'+a+'"]').closest("tr")).remove().draw()}),showNotice("success",e.message,"Success!"))},error:function(e){showNotice("error",e.responseJSON.message,"Error!")}})})});